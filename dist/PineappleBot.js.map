{"version":3,"sources":["PineappleBot.js"],"names":["Object","defineProperty","exports","value","_sortBy2","require","_sortBy3","_interopRequireDefault","_each2","_each3","_defaults2","_defaults3","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_snoowrap","_snoowrap2","_discord","_discord2","_dot","_dot2","_Ping","_Ping2","_TopTen","_TopTen2","obj","__esModule","default","_classCallCheck","instance","TypeError","bot","_ref","arguments","undefined","userAgent","clientId","clientSecret","refreshToken","subreddit","discordToken","discordServer","commandPrefix","Error","subbreddit","__reddit","__initRedditClient","__discord","__initDiscordClient","__dot","__initTemplateEngine","discordCommands","boot","__initBotEvents","Client","ws","compress","process","templateSettings","strip","path","_this","on","console","log","user","setGame","catch","error","msg","checkMessagesForCommand","oldMessage","newMessage","isEdit","author","id","content","startsWith","cmdTxt","split","substring","suffix","isMentioned","mention","e","channel","sendMessage","cmd","helpCommand","msgTxt","debug","stack","then","message","delete","commands","cmds","filter","contents","helpList","sendBatchedMessage","batches","match","batch","go","login","respsonse"],"mappings":"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","file":"PineappleBot.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _sortBy2 = require('lodash/sortBy');\n\nvar _sortBy3 = _interopRequireDefault(_sortBy2);\n\nvar _each2 = require('lodash/each');\n\nvar _each3 = _interopRequireDefault(_each2);\n\nvar _defaults2 = require('lodash/defaults');\n\nvar _defaults3 = _interopRequireDefault(_defaults2);\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n//import DateFormat from 'dateformat';\n\n\nvar _snoowrap = require('snoowrap');\n\nvar _snoowrap2 = _interopRequireDefault(_snoowrap);\n\nvar _discord = require('discord.js');\n\nvar _discord2 = _interopRequireDefault(_discord);\n\nvar _dot = require('dot');\n\nvar _dot2 = _interopRequireDefault(_dot);\n\nvar _Ping = require('./Commands/Ping');\n\nvar _Ping2 = _interopRequireDefault(_Ping);\n\nvar _TopTen = require('./Commands/TopTen');\n\nvar _TopTen2 = _interopRequireDefault(_TopTen);\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar bot = function () {\n\n    /**\n     * @summary initialises the bot\n     *\n     * @param {string} [userAgent] A unique description of what your app does. This argument is not necessary when Snoowrap\n     is running in a browser.\n     * @param {string} [clientId] The client ID of your app (assigned by reddit)\n     * @param {string} [clientSecret] The client secret of your app (assigned by reddit). If you are using a refresh token\n     with an installed app (which does not have a client secret), pass an empty string as your `clientSecret`.\n     * @param {string} [refreshToken] A refresh token for your app.\n     * @param {string} [subreddit] The subreddit name we are going to be managing\n     * @param {string} [discordToken] Key for the stats api\n     * @param {string} [discordServer] The server to work in discord\n     * @param {string} [commandPrefix] The command prefix\n     */\n    function bot() {\n        var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n            userAgent = _ref.userAgent,\n            clientId = _ref.clientId,\n            clientSecret = _ref.clientSecret,\n            refreshToken = _ref.refreshToken,\n            subreddit = _ref.subreddit,\n            discordToken = _ref.discordToken,\n            discordServer = _ref.discordServer,\n            commandPrefix = _ref.commandPrefix;\n\n        _classCallCheck(this, bot);\n\n        if (clientId === undefined || clientSecret === undefined || refreshToken === undefined) {\n            throw new Error('Reddit Credentials not supplied, fuckwit');\n        }\n\n        if (discordToken === undefined) {\n            throw new Error('Discord Token needed, dickhead');\n        }\n\n        (0, _defaults3.default)(this, {\n            userAgent,\n            clientId,\n            clientSecret,\n            refreshToken,\n            subreddit,\n            discordToken,\n            discordServer,\n            commandPrefix\n        }, {\n            userAgent: null,\n            clientId: null,\n            clientSecret: null,\n            refreshToken: null,\n            subbreddit: 'uktrees',\n            discordToken: null,\n            discordServer: '#uktrees',\n            commandPrefix: '!'\n        });\n\n        /**\n         * The reddit client\n         *\n         * @type {Snoowrap}\n         */\n        this.__reddit = this.__initRedditClient();\n\n        /**\n         * The discord client\n         *\n         * @type {Discord.client}\n         */\n        this.__discord = this.__initDiscordClient();\n\n        /**\n         * The template engine\n         *\n         * @type {Dot}\n         * @private\n         */\n        this.__dot = this.__initTemplateEngine();\n\n        /**\n         *\n         * @type {{ping: Command}}\n         */\n        this.discordCommands = {\n            'ping': new _Ping2.default().boot(this.__discord, this.__dot, this.__reddit),\n            'topten': new _TopTen2.default().boot(this.__discord, this.__dot, this.__reddit)\n        };\n\n        this.__initBotEvents();\n    }\n\n    /**\n     * Sets up snoowrap\n     *\n     * @returns Snoowrap\n     * @private\n     */\n\n    _createClass(bot, [{\n        key: '__initRedditClient',\n        value: function __initRedditClient() {\n            return new _snoowrap2.default({\n                userAgent: this.userAgent,\n                clientId: this.clientId,\n                clientSecret: this.clientSecret,\n                refreshToken: this.refreshToken\n            });\n        }\n\n        /**\n         * Sets up discord\n         *\n         * @returns Discord.client\n         * @private\n         */\n\n    }, {\n        key: '__initDiscordClient',\n        value: function __initDiscordClient() {\n            return new _discord2.default.Client({\n                ws: {\n                    compress: true\n                }\n            });\n        }\n\n        /**\n         * Sets up the Dot template engine\n         *\n         * @returns Dot\n         * @private\n         * @static\n         */\n\n    }, {\n        key: '__initTemplateEngine',\n        value: function __initTemplateEngine() {\n            return _dot2.default.process({ templateSettings: { strip: false }, path: 'views/' });\n        }\n\n        /**\n         * Sets up the bot events\n         *\n         * @private\n         */\n\n    }, {\n        key: '__initBotEvents',\n        value: function __initBotEvents() {\n            var _this = this;\n\n            this.__discord.on('ready', function () {\n                console.log('Logged in!');\n                console.log('type ' + _this.commandPrefix + 'help in Discord for a this.discordCommands list.');\n                _this.__discord.user.setGame(_this.commandPrefix + 'help').catch(function (error) {\n                    throw error;\n                });\n            });\n\n            this.__discord.on('message', function (msg) {\n                _this.checkMessagesForCommand(msg, false);\n            });\n            this.__discord.on('messageUpdate', function (oldMessage, newMessage) {\n                _this.checkMessagesForCommand(newMessage, true);\n            });\n        }\n\n        /**\n         *\n         * @param msg\n         * @param isEdit\n         */\n\n    }, {\n        key: 'checkMessagesForCommand',\n        value: function checkMessagesForCommand(msg, isEdit) {\n            //check if message is a command\n            if (msg.author.id !== this.__discord.user.id && msg.content.startsWith(this.commandPrefix)) {\n                console.log('treating ' + msg.content + ' from ' + msg.author + ' as command');\n                var cmdTxt = msg.content.split(' ')[0].substring(this.commandPrefix.length);\n                var suffix = msg.content.substring(cmdTxt.length + this.commandPrefix.length + 1); //add one for the ! and one for the space\n                if (msg.isMentioned(this.__discord.user)) {\n                    try {\n                        cmdTxt = msg.content.split(' ')[1];\n                        suffix = msg.content.substring(this.__discord.user.mention().length + cmdTxt.length + this.commandPrefix.length + 1);\n                    } catch (e) {\n                        //no command\n                        msg.channel.sendMessage('Yes?');\n                        return;\n                    }\n                }\n\n                var cmd = this.discordCommands[cmdTxt];\n\n                if (cmdTxt === 'help') {\n                    //help is special since it iterates over the other this.discordCommands\n                    this.helpCommand(suffix, msg);\n                } else if (cmd) {\n\n                    try {\n                        cmd.process(msg, { subreddit: this.subreddit, suffix: suffix }, isEdit);\n                    } catch (e) {\n                        var msgTxt = 'command ' + cmdTxt + ' failed :(';\n                        if (this.debug) {\n                            msgTxt += '\\n' + e.stack;\n                        }\n                        msg.channel.sendMessage(msgTxt);\n                        throw e;\n                    }\n                } else {\n                    msg.channel.sendMessage(cmdTxt + ' not recognized as a command!').then(function (message) {\n                        return message.delete(5000);\n                    });\n                }\n            } else {\n                //message isn't a command or is from us\n                //drop our own messages to prevent feedback loops\n                if (msg.author === this.__discord.user) {\n                    return;\n                }\n\n                if (msg.author !== this.__discord.user && msg.isMentioned(this.__discord.user)) {\n                    msg.channel.sendMessage(msg.author + ', you called?');\n                }\n            }\n        }\n\n        /**\n         * Rund the help comand\n         * @param suffix\n         * @param msg Disco\n         */\n\n    }, {\n        key: 'helpCommand',\n        value: function helpCommand(suffix, msg) {\n            var commands = this.discordCommands;\n            var cmds = {};\n            if (suffix) {\n                cmds = suffix.split(' ').filter(function (cmd) {\n                    return commands[cmd];\n                });\n            } else {\n                cmds = (0, _sortBy3.default)(commands, ['']);\n            }\n\n            var contents = this.__dot.helpList({ 'commands': cmds });\n            this.sendBatchedMessage(contents, msg);\n        }\n    }, {\n        key: 'sendBatchedMessage',\n        value: function sendBatchedMessage(contents, msg) {\n            var batches = contents.match(/.{1,1016}/g);\n\n            (0, _each3.default)(batches, function (batch) {\n                msg.author.sendMessage(batch).catch(function (error) {\n                    throw error;\n                });\n            });\n        }\n    }, {\n        key: 'go',\n        value: function go() {\n            this.__discord.login(this.discordToken).then(function (respsonse) {\n                console.log('response', respsonse);\n            }).catch(function (error) {\n                throw error;\n            });\n        }\n    }]);\n\n    return bot;\n}();\n\nexports.default = bot;\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map\n//# sourceMappingURL=PineappleBot.js.map"]}