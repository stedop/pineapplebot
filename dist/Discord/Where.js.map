{"version":3,"sources":["../../src/Discord/Where.js"],"names":["Where","name","syntax","description","message","params","username","suffix","get","then","response","location","data","channel","sendMessage","author","city","error"],"mappings":";;;;;;;;;;;;AACA;;;;AACA;;AACA;;;;;;;;;;;;IAEqBA,K;;;;;;;;;;;;AACjB;;;;+BAIO;AACH,iBAAKC,IAAL,GAAY,OAAZ;AACA,iBAAKC,MAAL,GAAc,mBAAd;AACA,iBAAKC,WAAL,GAAmB,iFAAnB;AACA,mBAAO,IAAP;AACH;;AAED;;;;;;;;gCAKSC,O,EAASC,M,EAAS;AACvB,gBAAIC,WAAW,KAAKC,MAApB;AACA,gBAAID,QAAJ,EAAc;AACV,gCACKE,GADL,CACU,qFADV,EAEKC,IAFL,CAEW,UAAEC,QAAF,EAAgB;AACnB,wBAAIC,WAAW,sBAAQD,SAASE,IAAjB,EAAuB,EAAE,MAAMN,QAAR,EAAvB,EAA4C,CAA5C,CAAf;AACA,wBAAKK,QAAL,EAAgB;AACZP,gCAAQS,OAAR,CAAgBC,WAAhB,CAA6BV,QAAQW,MAAR,GAAiB,GAAjB,GAAuBT,QAAvB,GAAkC,SAAlC,GAA8CK,SAASK,IAApF;AACH,qBAFD,MAEO;AACHZ,gCAAQS,OAAR,CAAgBC,WAAhB,CAA6BV,QAAQW,MAAR,GAAiB,GAAjB,GAAuBT,QAAvB,GAAkC,uBAA/D;AACH;AACJ,iBATL,EAUI,UAAEW,KAAF,EAAa;AACT,0BAAMA,KAAN;AACH,iBAZL;AAaH,aAdD,MAcO;AACHb,wBAAQS,OAAR,CAAgBC,WAAhB,CAA6BV,QAAQW,MAAR,GAAiB,sDAA9C;AACH;AACJ;;;;;;kBApCgBf,K","file":"Where.js","sourcesContent":["import { filter, matchesProperty } from 'lodash';\nimport DiscordCommand from './../DiscordCommand';\nimport { Message } from 'discord.js';\nimport axios from 'axios';\n\nexport default class Where extends DiscordCommand {\n    /**\n     * Define command\n     * @returns { Where }\n     */\n    boot() {\n        this.name = 'Where';\n        this.syntax = 'where <username> ';\n        this.description = 'will tell you if this user is registered on the map and tell you their location';\n        return this;\n    }\n\n    /**\n     *\n     * @param message { Message }\n     * @param params {{}}\n     */\n    process( message, params ) {\n        let username = this.suffix;\n        if (username) {\n            axios\n                .get( 'https://www.zeemaps.com/emarkers?g=2551174&k=REGULAR&e=false&_dc=0.6138917768604712' )\n                .then( ( response ) => {\n                    let location = filter( response.data, { 'nm': username } )[0];\n                    if ( location ) {\n                        message.channel.sendMessage( message.author + ' ' + username + ' is in ' + location.city );\n                    } else {\n                        message.channel.sendMessage( message.author + ' ' + username + ' not found on the map' );\n                    }\n                },\n                ( error ) => {\n                    throw error;\n                } );\n        } else {\n            message.channel.sendMessage( message.author + ' I need a name to search for eg. !where pineapplebot');\n        }\n    }\n}"]}