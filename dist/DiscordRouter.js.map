{"version":3,"sources":["DiscordRouter.js"],"names":["Object","defineProperty","exports","value","_each2","require","_each3","_interopRequireDefault","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","obj","__esModule","default","_classCallCheck","instance","TypeError","DiscordRouter","routes","discord","dot","reddit","config","__discord","__dot","__reddit","__routes","__commandPrefix","get","parseRoutes","_this","route","boot","name","toLowerCase","getRoutes","isCommand","msg","content","startsWith","checkMessagesForCommand","match","isMentioned","user","channel","sendMessage","author","routeName","split","substring","params","mention","e","cmd","suffix"],"mappings":"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","file":"DiscordRouter.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _each2 = require('lodash/each');\n\nvar _each3 = _interopRequireDefault(_each2);\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar DiscordRouter = function () {\n\n    /**\n     *\n     * @param routes {}\n     * @param discord {Client}\n     * @param dot {Dot}\n     * @param reddit {Snoowrap}\n     * @param config {Config}\n     * @returns {DiscordRouter}\n     */\n    function DiscordRouter(routes, discord, dot, reddit, config) {\n        _classCallCheck(this, DiscordRouter);\n\n        /**\n         *\n         * @type {Client}\n         * @private\n         */\n        this.__discord = discord;\n\n        /**\n         *\n         * @type {Dot}\n         * @private\n         */\n        this.__dot = dot;\n\n        /**\n         *\n         * @type {Snoowrap}\n         * @private\n         */\n        this.__reddit = reddit;\n\n        /**\n         *\n         * @type {{}}\n         * @private\n         */\n        this.__routes = {};\n\n        /**\n         *\n         * @type {string}\n         * @private\n         */\n        this.__commandPrefix = config.get('Discord.commandPrefix');\n\n        this.parseRoutes(routes);\n\n        return this;\n    }\n\n    /**\n     *\n     * @param routes {DiscordCommand}\n     */\n\n    _createClass(DiscordRouter, [{\n        key: 'parseRoutes',\n        value: function parseRoutes(routes) {\n            var _this = this;\n\n            (0, _each3.default)(routes, function (route) {\n                route = new route(_this.__discord, _this.__dot, _this.__reddit).boot();\n                var key = route.name.toLowerCase();\n                _this.__routes[key] = route;\n            });\n        }\n\n        /**\n         *\n         * @returns {{}|*}\n         */\n\n    }, {\n        key: 'getRoutes',\n        value: function getRoutes() {\n            return this.__routes;\n        }\n\n        /**\n         * \n         * @param msg Discord.Message\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'isCommand',\n        value: function isCommand(msg) {\n            return msg.content.startsWith(this.__commandPrefix);\n        }\n\n        /**\n         *\n         * @param msg Discord.Message\n         */\n\n    }, {\n        key: 'checkMessagesForCommand',\n        value: function checkMessagesForCommand(msg) {\n            //check if message is a command\n            if (this.isCommand(msg) === true) {\n                return this.match(msg);\n            }\n\n            if (msg.isMentioned(this.__discord.user)) {\n                msg.channel.sendMessage(msg.author + ', you called?');\n            }\n\n            return false;\n        }\n\n        /**\n         *\n         * @param msg Discord.Message\n         */\n\n    }, {\n        key: 'match',\n        value: function match(msg) {\n            var routeName = msg.content.split(' ')[0].substring(this.__commandPrefix.length);\n            var params = msg.content.substring(routeName.length + this.__commandPrefix.length + 1); //add one for the ! and one for the space\n\n            if (msg.isMentioned(this.__discord.user)) {\n                try {\n                    routeName = msg.content.split(' ')[1];\n                    params = msg.content.substring(this.__discord.user.mention().length + routeName.length + this.__commandPrefix.length + 1);\n                } catch (e) {\n                    //no command\n                    msg.channel.sendMessage('Yes?');\n                    return false;\n                }\n            }\n\n            var cmd = this.__routes[routeName];\n\n            if (cmd) {\n                cmd.suffix = params;\n                cmd.routes = this.getRoutes();\n                return cmd;\n            }\n\n            return false;\n        }\n    }]);\n\n    return DiscordRouter;\n}();\n\nexports.default = DiscordRouter;\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map"]}