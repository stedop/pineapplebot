{"version":3,"sources":["DiscordRouter.js"],"names":["Object","defineProperty","exports","value","_each2","require","_each3","_interopRequireDefault","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","obj","__esModule","default","_classCallCheck","instance","TypeError","DiscordRouter","routes","discord","dot","reddit","commandPrefix","arguments","undefined","__discord","__dot","__reddit","__routes","__commandPrefix","parseRoutes","_this","route","boot","name","toLowerCase","getRoutes","isCommand","msg","content","startsWith","checkMessagesForCommand","console","log","match","isMentioned","user","channel","sendMessage","author","routeName","split","substring","params","mention","e","cmd","suffix"],"mappings":"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","file":"DiscordRouter.js","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _each2 = require('lodash/each');\n\nvar _each3 = _interopRequireDefault(_each2);\n\nvar _createClass = function () {\n    function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n            var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);\n        }\n    }return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;\n    };\n}();\n\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n\nvar DiscordRouter = function () {\n\n    /**\n     *\n     * @param routes {}\n     * @param discord {Discord.client}\n     * @param dot {Dot}\n     * @param reddit {Snoowrap}\n     * @param commandPrefix {string}\n     * @returns {DiscordRouter}\n     */\n    function DiscordRouter(routes, discord, dot, reddit) {\n        var commandPrefix = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : '!';\n\n        _classCallCheck(this, DiscordRouter);\n\n        /**\n         *\n         * @type {Discord.client}\n         * @private\n         */\n        this.__discord = discord;\n\n        /**\n         *\n         * @type {Dot}\n         * @private\n         */\n        this.__dot = dot;\n\n        /**\n         *\n         * @type {Snoowrap}\n         * @private\n         */\n        this.__reddit = reddit;\n\n        /**\n         *\n         * @type {{}}\n         * @private\n         */\n        this.__routes = {};\n\n        /**\n         *\n         * @type {string}\n         * @private\n         */\n        this.__commandPrefix = commandPrefix;\n\n        this.parseRoutes(routes);\n\n        return this;\n    }\n\n    /**\n     *\n     * @param routes {DiscordCommand}\n     */\n\n    _createClass(DiscordRouter, [{\n        key: 'parseRoutes',\n        value: function parseRoutes(routes) {\n            var _this = this;\n\n            (0, _each3.default)(routes, function (route) {\n                route = new route(_this.__discord, _this.__dot, _this.__reddit).boot();\n                var key = route.name.toLowerCase();\n                _this.__routes[key] = route;\n            });\n        }\n\n        /**\n         *\n         * @returns {{}|*}\n         */\n\n    }, {\n        key: 'getRoutes',\n        value: function getRoutes() {\n            return this.__routes;\n        }\n\n        /**\n         * \n         * @param msg Discord.Message\n         * @returns {boolean}\n         */\n\n    }, {\n        key: 'isCommand',\n        value: function isCommand(msg) {\n            return msg.content.startsWith(this.__commandPrefix);\n        }\n\n        /**\n         *\n         * @param msg Discord.Message\n         */\n\n    }, {\n        key: 'checkMessagesForCommand',\n        value: function checkMessagesForCommand(msg) {\n            console.log('routes', this.__routes);\n            //check if message is a command\n            if (this.isCommand(msg) === true) {\n                return this.match(msg);\n            }\n\n            if (msg.isMentioned(this.__discord.user)) {\n                msg.channel.sendMessage(msg.author + ', you called?');\n            }\n\n            return false;\n        }\n\n        /**\n         *\n         * @param msg Discord.Message\n         */\n\n    }, {\n        key: 'match',\n        value: function match(msg) {\n            var routeName = msg.content.split(' ')[0].substring(this.__commandPrefix.length);\n            var params = msg.content.substring(routeName.length + this.__commandPrefix.length + 1); //add one for the ! and one for the space\n\n            if (msg.isMentioned(this.__discord.user)) {\n                try {\n                    routeName = msg.content.split(' ')[1];\n                    params = msg.content.substring(this.__discord.user.mention().length + routeName.length + this.__commandPrefix.length + 1);\n                } catch (e) {\n                    //no command\n                    msg.channel.sendMessage('Yes?');\n                    return false;\n                }\n            }\n\n            var cmd = this.__routes[routeName];\n\n            if (cmd) {\n                cmd.suffix = params;\n                cmd.routes = this.getRoutes();\n                return cmd;\n            }\n\n            return false;\n        }\n    }]);\n\n    return DiscordRouter;\n}();\n\nexports.default = DiscordRouter;\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map\n//# sourceMappingURL=DiscordRouter.js.map"]}